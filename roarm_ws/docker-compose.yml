services:
  roarm:
    image: roarm_ws:latest
    build:
      context: .
    stdin_open: true
    tty: true
    working_dir: /opt/roarm_ws
    volumes:
      - .:/opt/roarm_ws
      - ../Cyber-Zero:/opt/Cyber-Zero
    command: >
      bash -lc "source /opt/ros/humble/setup.sh &&
      if [ -d /opt/Cyber-Zero ]; then pip install -e /opt/Cyber-Zero; fi &&
      source /opt/roarm_ws/install/setup.sh || true;
      exec bash"
